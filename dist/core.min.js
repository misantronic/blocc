var k=[],j=J=c=0,X=setInterval(function(a,b,f,g,h,i,l){for(b="",a="indexOf",k[39]&&!~P[d.y][a](d.x+1)?d.x++&&(c=d.x<26?0:c+1):k[37]&&!~P[d.y][a](d.x-1)&&d.x--&&(c=d.x<26?0:c-1),d.y>24&&clearInterval(X),j&&(d.y-=j,j++,d.y<0&&(d.y=0),j=j>4?0:j),i=0;i<P.length;i++){for(h=c;h<c+100;h++){for(l=1,g=0;g<e.length;g++)if(f=e[g],h!=c||i||(~P[f.y][a](f.x+1)?f.a=0:~P[f.y][a](f.x-1)&&(f.a=1),f.x=f.a?f.x+.5:f.x-.5),f.x==h&&f.y==i){f.x==d.x&&f.y==d.y&&clearInterval(X),b+="<i>▄</i>",l=0;break}G.x==d.x&&G.y==d.y&&clearInterval(X),l&&(b+=d.x==h&&d.y==i?"<b>▄</b>":G.x==h&&G.y==i?"<u>▄</u>":~P[i][a](h)?"▄":" ")}b+="\n"}P[d.y+1]&&!~P[d.y+1][a](d.x)&&d.y++||(J=0),p.innerHTML=b},50);onkeydown=onkeyup=function(a,b){(37==a[b="keyCode"]||39==a[b])&&(k[a[b]]="keydown"==a.type),"keydown"==a.type&&38==a[b]&&!j&&J<2&&(j=1,J++)};